<?xml version="1.0"?>
<svg viewBox="0 0 558 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

	<title>Game Example</title>

	<rect x="0" y="0" width="100%" height="100%" fill="#DAE2B6"  />
	<rect x="20" y="80" width="60%" height="50%" stroke="#202020" stroke-width="2" fill="#817F82"  />

	<circle id="coin" cx="300" cy="150" r="7.5" stroke="black" fill="#FFBF00" />
	<rect id="player" x="40" y="208" height="20" width="20" stroke="black" fill="#ff3d3d" />

	<text x="380" y="100" >score:</text>
	<text x="380" y="200" font-size="8">Move up and down with arrows.</text>
	<text x="380" y="220" font-size="8">The game ends when you collect 5 points.</text>
	<text id="pointsScored" x="436" y="160" font-size="40"> </text>

	<script type="text/ecmascript">
	<![CDATA[	
	
		//1. explain the line below
		var coin = document.getElementById("coin");
		var player = document.getElementById("player");
		var score = 0;
		var speed = 0.8;
	
	
		function displayScore() {
			document.getElementById('pointsScored').firstChild.data = score;	
			if(score == 5) {
				if(alert('You Won! You scored 5! Congratulations!')) {}
				
				//2. explain the line below
				else window.location.reload(); 
			}
		}

		function animation(){
			//3. explain the line below
			coin.cx.baseVal.value -= speed;
			lostGame();
			isCollision();
			displayScore();
			if (coin.cx.baseVal.value < 30) {
				
				//4. explain the line below
				coin.cx.baseVal.value = 300;
				coin.cy.baseVal.value = Math.floor(Math.random() * 108) + 100;
			}		
		}

		//5. explain how this function works
		function isCollision(){
	
			if(((coin.cx.baseVal.value <= player.x.baseVal.value + 20) && (coin.cx.baseVal.value >= player.x.baseVal.value)) && ((coin.cy.baseVal.value <= player.y.baseVal.value + 20) && (coin.cy.baseVal.value >= player.y.baseVal.value ))) {
			
				score++;
				coin.cx.baseVal.value = 300;
				coin.cy.baseVal.value = Math.floor(Math.random() * 108) + 100;
				if(score % 10 == 0){
					speed += 0.3
				}
			}
		}

		function lostGame(){
			if (coin.cx.baseVal.value < 30) {
				if(alert('You lost! Your score is: ' + score)){}
				else window.location.reload(); 		
			}
		}

		function processKeys(e) {
			switch (e.keyCode) {

				//6. explain how the case 38 works
				case 38:
					var y = player.y.baseVal.value; 
					y-=2;
					if (y < 80) {
						y = 208;
					}
					player.y.baseVal.value=y;
					break;
			
				case 40:
					var y = player.y.baseVal.value; 
					y+=2;
					if (y > 208) {
						y = 80;
					}
					player.y.baseVal.value=y;
					break;
		
				case 37:
					var x = player.x.baseVal.value; 
					x-=2;
					if (x < 22) {
						x = 22;
					}
					player.x.baseVal.value=x;
					break;
			
				case 39:
					var x = player.x.baseVal.value; 
					x+=2;
					if (x > 320) {
						x = 320;
					}
					player.x.baseVal.value=x;
					break;
			}
		}

		//7. explain the line below
		window.addEventListener('keydown', processKeys, false);
		setInterval('animation()', 16.7);
	
	]]>
	</script>
</svg>